<!doctype html>
<html>

<head>
  <meta name="viewport" content="width=device-width">
  <title>Simulator</title>

  <link href="css/theme.default.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800&display=swap" rel="stylesheet">

  <script type="text/javascript" src="libs/jquery-3.4.1.min.js"></script>
  <script type="text/javascript" src="libs/jquery.tablesorter.min.js"></script>
  <script type="text/javascript" src="libs/jquery.tablesorter.widgets.min.js"></script>
  <script type="text/javascript" src="talents.js"></script>
  <script type="text/javascript" src="gear.js"></script>
  <script type="text/javascript" src="spells.js"></script>
  <script type="text/javascript" src="simulation.js"></script>
  <script type="text/javascript" src="buffs.js"></script>
  <script type="text/javascript" src="ui.js"></script>

  <script>var whTooltips = { colorLinks: true, iconizeLinks: false, renameLinks: false, "hide": { "ilvl": false } };</script>
  <script src="https://wow.zamimg.com/widgets/power.js"></script>
</head>

<!-- TODO LIST 

FILL OUT GEAR DATA
WEAPON PROCS

AQ BOOKS
TALENT UI
ITEM SETS
dynamic spell queue function?
are there non-magic procs?
review all spell rotation - optimize timings etc
Battle Squawk
Windfury Totem + Improved Weapon Totems
random cooldown extra
store saved settings
sort tables after test + trigger updates after each table
overpower threshold
spell crit
execute bugged


during classic:
verify heroic strike refund rules
verify execute refund rules
verify if bloodthirst proccing crusader gets the buff
verify if swing proccing flurry gets the buff
race base stats
extra attacks on next swing?
check for a base crit
deep wounds mh or oh?
anger management regen ?
test extra attacks + flurry

-->






<!-- ROTATION

Bloodrage: Used on cooldown
RagePotion: Used last 20 secs and under 25 rage
JujuFlurry: Used last 20 secs
DeathWish: Used last 30 secs
BloodFury: Used last 17 secs
Berserking: Used last 10 secs
Recklessness: Used last 15 secs
Execute: Used last 18% of fight duration
-- spells below not used during execute phase --
Overpower: Used on cooldown
BerserkerRage: Used on cooldown
BattleShout: Used on cooldown
Bloodthirst: Used on cooldown
MortalStrike: Used on cooldown
Whirlwind: Used on cooldown, if BT or MS enabled only use above 45 rage, test 45?
HeroicStrike: Used on cooldown, if BT or MS or WW enabled only use above 40 rage, test 40?
Hamstring: Used on cooldown, if BT or MS or WW enabled only use above 40 rage, test 40?


Priorities:
Bloodrage -> RagePotion -> JujuFlurry -> DeathWish -> BloodFury -> Berserking
-> Recklessness -> Execute -> Overpower -> BerserkerRage -> BattleShout
-> Bloodthirst -> MortalStrike -> Whirlwind -> HeroicStrike -> Hamstring

-->

<body>
	<div class="alerts"></div>
	<progress value="0" max="100"></progress>

	<nav>
		<ul>
			<li class="active">Settings</li>
			<li>Head</li>
			<li>Neck</li>
			<li>Shoulder</li>
			<li>Back</li>
			<li>Chest</li>
			<li>Wrist</li>
			<li>Hands</li>
			<li>Waist</li>
			<li>Legs</li>
			<li>Feet</li>
			<li>Main Hand</li>
			<li>Off Hand</li>
			<li>Enchants</li>
		</ul>
	</nav>

	<div class="sidebar">
		<input type="submit" id="runsim" value="Run Sim" />
		<input type="submit" id="rungear" value="Test All Gear" />
		<span id="dps"></span>
		<span id="time"></span>
	</div>

	<section>
		<article class="settings">
			<label>Settings</label>
			<ul>
				<li>
					<label>Simulations</label>
					<input type="text" name="simulations" value="10000" />
				</li>
				<li>
					<label>Fight Duration</label>
					<input type="text" name="timesecs" value="100" />
				</li>
				<li>
					<label>Target Armor</label>
					<input type="text" name="armor" value="1000" />
				</li>
				<li>
					<label>Initial Rage</label>
					<input type="text" name="startrage" value="0" />
				</li>
				<li>
					<label>Race</label>
					<div>
						<div class="race" data-ap="160" data-str="125" data-agi="75" data-skill_0="5" data-skill_1="5"><img src="img/human.png" alt="human"></div>
						<div class="race" data-ap="160" data-str="125" data-agi="75"><img src="img/dwarf.png" alt="dwarf"></div>
						<div class="race" data-ap="160" data-str="125" data-agi="75"><img src="img/gnome.png" alt="gnome"></div>
						<div class="race" data-ap="160" data-str="125" data-agi="75"><img src="img/nelf.png" alt="nelf"></div>
						<div class="race" data-ap="160" data-str="125" data-agi="75"><img src="img/undead.png" alt="undead"></div>
						<div class="race" data-spell="bloodfury" data-ap="160" data-str="125" data-agi="75" data-skill_3="5"><img src="img/orc.png" alt="orc"></div>
						<div class="race" data-ap="160" data-str="125" data-agi="75"><img src="img/tauren.png" alt="tauren"></div>
						<div class="race" data-spell="berserking" data-ap="160" data-str="125" data-agi="75"><img src="img/troll.png" alt="troll"></div>
					</div>
				</li>
				<li>
					<label>Rotation</label>
					<div>
						<div class="spell" data-id="berserkerrage">
							<img src="img/Spell_Nature_AncestralGuardian.jpg" alt="BerserkerRage">
							<a href="https://classic.wowhead.com/spell=18499" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="execute">
							<img src="img/INV_Sword_48.jpg" alt="Execute">
							<a href="https://classic.wowhead.com/spell=20662" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="overpower">
							<img src="img/ability_meleedamage.jpg" alt="Overpower">
							<a href="https://classic.wowhead.com/spell=11585" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="battleshout" data-disable-buff="battleshout">
							<img src="img/Ability_Warrior_BattleShout.jpg" alt="BattleShout">
							<a href="https://classic.wowhead.com/spell=11551" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="bloodthirst">
							<img src="img/Spell_Nature_BloodLust.jpg" alt="Bloodthirst">
							<a href="https://classic.wowhead.com/spell=23894" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="whirlwind">
							<img src="img/ability_whirlwind.jpg" alt="Whirlwind">
							<a href="https://classic.wowhead.com/spell=1680" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="deepwounds" data-type="buff">
							<img src="img/Ability_BackStab.jpg" alt="DeepWounds">
							<a href="https://classic.wowhead.com/spell=23255" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="bloodrage">
							<img src="img/Ability_Racial_BloodRage.jpg" alt="Bloodrage">
							<a href="https://classic.wowhead.com/spell=2687" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="deathwish" data-type="buff">
							<img src="img/Spell_Shadow_DeathPact.jpg" alt="DeathWish">
							<a href="https://classic.wowhead.com/spell=12328" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="heroicstrike">
							<img src="img/Ability_Rogue_Ambush.jpg" alt="HeroicStrike">
							<a href="https://classic.wowhead.com/spell=11567" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="mortalstrike">
							<img src="img/Ability_Warrior_SavageBlow.jpg" alt="MortalStrike">
							<a href="https://classic.wowhead.com/spell=27580" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="hamstring">
							<img src="img/Ability_ShockWave.jpg" alt="Hamstring">
							<a href="https://classic.wowhead.com/spell=7373" class="wh-tooltip"></a>
						</div>
						<div class="spell" data-id="recklessness" data-type="buff">
							<img src="img/ability_criticalstrike.jpg" alt="Recklessness">
							<a href="https://classic.wowhead.com/spell=1719" class="wh-tooltip"></a>
						</div>
						<div class="spell hidden" data-id="berserking" data-type="buff">
							<img src="img/racial_troll_berserk.jpg" alt="Berserking">
							<a href="https://classic.wowhead.com/spell=26296" class="wh-tooltip"></a>
						</div>
						<div class="spell hidden" data-id="bloodfury" data-type="buff">
							<img src="img/racial_orc_berserkerstrength.jpg" alt="BloodFury">
							<a href="https://classic.wowhead.com/spell=20572" class="wh-tooltip"></a>
						</div>
					</div>
				</li>
			</ul>
			<input type="hidden" name="executeperc" value="15" />
		</article>
		<article class="buffs">
			<label>Buffs</label>
		</article>
		<article class="char">
			<label>Stats</label>
			<ul>
				<li>
					<label>Strength</label>
					<span id="str"></span>
				</li>
				<li>
					<label>Agility</label>
					<span id="agi"></span>
				</li>
				<li>
					<label>Attack Power</label>
					<span id="ap"></span>
				</li>
				<li>
					<label>Skill</label>
					<span id="skill"></span>
				</li>
				<li>
					<label>Miss</label>
					<span id="miss"></span>
				</li>
				<li>
					<label>Crit</label>
					<span id="crit"></span>
				</li>
				<li>
					<label>Crit Cap</label>
					<span id="critcap"></span>
				</li>
				<li>
					<label>Dmg %</label>
					<span id="dmgmod"></span>
				</li>
				<li>
					<label>Haste</label>
					<span id="haste"></span>
				</li>
			</ul>
		</article>
		<article class="talents">
			<label>Talents</label>
		</article>
		<article class="filter">
			<label>Gear Filter</label>
			<ul class="sources">
				<li data-id="quest">Quest</li>
				<li data-id="crafting">Crafting</li>
				<li data-id="dungeon">Dungeon</li>
				<li data-id="onyxia">Onyxia</li>
				<li data-id="mc">Molten Core</li>
				<li data-id="bwl">Blackwing Lair</li>
				<li data-id="zg">Zul'Gurub</li>
				<li data-id="aq20">AQ20</li>
				<li data-id="aq40">AQ40</li>
				<li data-id="naxx">Naxxramas</li>
				<li data-id="worldboss">World Boss</li>
				<li data-id="pvp">PvP</li>
				<li data-id="other">Other</li>
			</ul>
			<ul class="phases">
				<li data-id="1" data-sources="onyxia,mc">P1</li>
				<li data-id="2" data-sources="">P2</li>
				<li data-id="3" data-sources="bwl">P3</li>
				<li data-id="4" data-sources="zg">P4</li>
				<li data-id="5" data-sources="aq20,aq40">P5</li>
				<li data-id="6" data-sources="naxx">P6</li>
			</ul>
		</article>
	</section>

</body>
</html>